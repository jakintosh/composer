{{define "components/workflow/modal"}}
<div id="workflow-modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document">
    <div class="modal-header">
      <h2>Create Workflow</h2>
      <button type="button" class="close-button" data-close-modal aria-label="Close create workflow form">Ã—</button>
    </div>
    <div class="modal-body">
      <div id="workflow-form-error" class="error-banner" role="alert"></div>
      <form id="workflow-form">
        <div class="form-row">
          <label for="workflow-id">Workflow ID</label>
          <input id="workflow-id" name="workflow-id" type="text" placeholder="my-workflow" required>
        </div>
        <div class="form-row">
          <label for="workflow-title">Title</label>
          <input id="workflow-title" name="workflow-title" type="text" placeholder="Human-friendly workflow title" required>
        </div>
        <div class="form-row">
          <label for="workflow-description">Description</label>
          <textarea id="workflow-description" name="workflow-description" placeholder="Explain what this workflow accomplishes"></textarea>
        </div>
        <div class="form-row">
          <label for="workflow-message">Message</label>
          <textarea id="workflow-message" name="workflow-message" placeholder="Optional run message shown to operators"></textarea>
        </div>
        <div class="form-row">
          <div class="step-header">
            <h3>Steps</h3>
            {{template "components/ui/add_button" .AddStepButton}}
          </div>
          <div id="workflow-steps"></div>
        </div>
        <div class="form-actions">
          <button type="button" class="secondary-button" data-close-modal>Cancel</button>
          <button type="submit" id="workflow-submit" class="primary-button">Save Workflow</button>
        </div>
      </form>
    </div>
  </div>
</div>
<template id="workflow-step-template">
  <div class="workflow-step">
    <div class="step-header">
      <h4>Step <span class="step-number"></span></h4>
      <button type="button" class="text-button remove-step">Remove</button>
    </div>
    <div class="form-row">
      <label>Step Name</label>
      <input type="text" name="step-name" placeholder="identify-step" required>
    </div>
    <div class="form-row">
      <label>Description</label>
      <textarea name="step-description" placeholder="Optional description"></textarea>
    </div>
    <div class="form-row">
      <label>Handler</label>
      <select name="step-handler">
        <option value="tool" selected>tool</option>
        <option value="human">human</option>
      </select>
    </div>
    <div class="form-row">
      <label>Prompt</label>
      <textarea name="step-prompt" placeholder="Guidance for human or cognitive handlers"></textarea>
    </div>
    <div class="form-row">
      <label>Content</label>
      <textarea name="step-content" placeholder="Optional inline content"></textarea>
    </div>
    <div class="form-row">
      <label>Inputs (one per line or comma separated)</label>
      <textarea name="step-inputs" placeholder="input-a&#10;input-b"></textarea>
    </div>
    <div class="form-row">
      <label>Output</label>
      <input type="text" name="step-output" placeholder="result-key">
    </div>
  </div>
</template>
{{end}}
